import codecs
import ImageProcessing
import math
import os
from os.path import join as pjoin
import cv2

mal_data_dir = '/home/user/projects/dataset/MALIMG/TEST/'
for i in os.listdir(mal_data_dir):#read the img name in this family
  img_dir= pjoin(mal_data_dir,i)#img address  
  img1 = cv2.imread(img_dir,cv2.IMREAD_GRAYSCALE)#read the img
  img_bin_data = img1.flatten() 

  hex_file = []

  for v in img_bin_data:
    s = int(v).to_bytes(1, 'little')
    hex_file.append(s)
  
  #listToStr = ' '.join([str(elem) for elem in hex_file])
  f = open(pjoin("/home/user/projects/dataset/Malimg_exe_test/",i[:-4])+'.exe', "wb")
  for value in hex_file:
    f.write(value)
  f.close()